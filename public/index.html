<!-- AIKO MAIL, INC. ALL RIGHTS RESERVED -->
<!-- TODO: Save state of interface (sidebar and boards...) so it stays same on restart (collapsed, not collapsed etc) -->
<!-- TODO: Make it so that when in 'single email view' we can press down and up arrow to go to next email -->
<!-- TODO: Somehow autofocus fields like add board modal and invite etc -->
<!-- TODO: Can we make date 'February 2' instead of 2/2 ? -->
<!-- TODO: Maybe we implement a right click for some options like m ar as unread etc -->

<!DOCTYPE html>
<html>

<head>
  <!-- ? Meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="author" content="Aiko AI">
  <title>Inbox</title>
  <link rel="icon" href="assets/img/favicon.png" type="image/png">
  <!-- ? Base CSS -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/loader.css">
  <!-- ? jQuery -->
  <script src="assets/js/third-party/jquery.min.js"></script>
  <script>
    window.jQuery = window.$ = require('jquery') // the things I do for Ruben
  </script>
  <!--? Using unsafe eval for Vue but if there comes a day when we aren't you are welcome to the below CSP -->
  <!--<meta http-equiv="Content-Security-Policy"
      content="default-src 'self' data:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' data: 'unsafe-inline'; connect-src *">-->
</head>

<body class="bg">
  <!-- TODO: If possible, add 'collapsed' when 'zen' is added so that zen doesn't exist without collapsed ever -->
  <!-- TODO: Add 'Zen Mode' in 'Window' mac menu option teehee -->

  <div id="app" :class="{
    'inline-flex': true,
    'collapsed': collapseSidebar
  }" style="opacity: 0" :style="'padding-top: ' + (isFullScreen ? '0' : '25') + 'px;'">

    <!--!------------------------------------------------------------->
    <!--? Prestyled themes -->
    <!--!------------------------------------------------------------->
    <link v-if="isDarkMode" rel="stylesheet" href="assets/css/dark.css">

    <!--!------------------------------------------------------------->
    <!--? User styles -->
    <!--!------------------------------------------------------------->
    <link rel="stylesheet" href="assets/css/custom.css">

    <!--!------------------------------------------------------------->
    <!--? Loader -->
    <!--!------------------------------------------------------------->
    <!-- TODO: MAKE INITIAL LOADER ONLY APPEAR AFTER INBOX IS ADDED SO THAT LOAD TEXT SHOWS ENTIRELY -->
    <!--* Update: I think this behaviour occurs now, needs testing for verification  -->
    <div id="fixed" class="aiko-loader center-loader">
      <div class="hide-whole"></div>
      <img src="assets/img/logo.svg">
      <div class="overwrap">
        <div class='wrap'>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
          <div class='c'></div>
        </div>
      </div>
      <div id="load-text">Optimizing content</div>
      <div id="load-text2">Setting up your mailbox</div>
      <div id="load-text3">Almost done</div>
      <div id="load-text4">This will only happen once</div>
      <div id="load-text5">Just a moment</div>
      <!-- Button trigger modal -->
      <div>
        <button type="button" class="btn btn-primary wv" data-toggle="modal" data-target="#initVideo">
          Watch a demo
        </button>
        <p class="wv">Get familiar with Aiko Mail while you wait.</p>
      </div>
      <!-- Modal -->
      <div class="modal fade" id="initVideo" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-body">
              <video controls src="assets/videos/initial.mp4" playsinline>
            </div>
            <div class="modal-footer">
              <p style="margin-bottom: 0;">You can skip this video once we're done setting up your
                mailbox.</p>
              <!-- TODO: SHOW THIS BUTTON ONLY WHEN APP IS READY -->
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Skip Video</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--!------------------------------------------------------------->
    <!-- ? Control Bar -->
    <!--!------------------------------------------------------------->
    <div :class="{'control-bar': true,'pc': isPC,}" v-if="!isFullScreen">
      <p v-if="isLinux" title="Close" @click="close"></p> <!-- Close ------------------------>
      <p v-if="isLinux" title="Minimize" @click="minimize"></p> <!-- Minimize ------------------------>
      <p v-if="isLinux" title="Full Screen" @click="fullscreen"></p> <!-- Full Screen ------------------------>

      <h5 @click="showDev = true">{{hash.substring(0, 9)}}</h5>


      <h1 title="Minimize" @click="minimize"><img src="assets/icons/top-minimize.png" width="10"></h1>
      <!-- Minimize ---------->
      <h1 v-if="!isMaximized" title="Maximize" @click="maximize"><img src="assets/icons/top-expand.png" width="10">
      </h1>
      <h1 v-if="isMaximized" title="Unmaximize" @click="unmaximize"><img src="assets/icons/top-expand.png" width="10">
      </h1>
      <!-- Maximize -->
      <h1 title="Close" @click="close"><img src="assets/icons/top-close.png" width="10"></h1>
      <!-- Close ---------------->
    </div>

    <!--!------------------------------------------------------------->
    <!-- ? Sidebar -->
    <!--!------------------------------------------------------------->
    <div class="sidebar">
      <div class="container">

        <!--!------------------------------------------------------------->
        <!-- ? Mail Menu -->
        <!--!------------------------------------------------------------->
        <div class="row">

          <!--!------------------------------------------------------------->
          <!-- ? Open Composer Button -->
          <!--!------------------------------------------------------------->
          <a class="sbtn" @click="openComposer()"><img src="assets/icons/sidebar-edit.svg"
              style="margin-right: 6px;"><span>Compose</span></a>

          <!--!------------------------------------------------------------->
          <!-- ? Email Folders -->
          <!--!------------------------------------------------------------->
          <a class="active">
            <img src="assets/icons/sidebar-home.svg">
            <span>Home <span class="main-count">{{smartUnread}}</span></span>
          </a>
          <!-- TODO: Outbox only shows when there is actually an email being sent for more than 5 seconds -->
          <a><img src="assets/icons/out.svg">
            <span class="blue">Outbox</span>
          </a>
          <a>
            <img src="assets/icons/sidebar-send.svg" class="sent-fix">
            <span>Sent</span>
          </a>
          <a>
            <img src="assets/icons/sidebar-star.svg" class="off-star">
            <span> Starred</span>
          </a>
          <a>
            <img src="assets/icons/sidebar-spam.svg" style="margin-top: -2px !important;">
            <span>Spam</span>
          </a>
          <a>
            <img src="assets/icons/sidebar-drafts.svg">
            <span>Drafts</span>
          </a>
          <a>
            <img src="assets/icons/sidebar-trash.svg">
            <span>Trash</span>
          </a>
        </div>


        <!--!------------------------------------------------------------->
        <!-- ? Team Menu -->
        <!--!------------------------------------------------------------->
        <div class="row">
          <div class="search no-mobile sc">
            <img src="assets/icons/header-search.svg">
            <input type="" name="" placeholder="Search Team">
          </div>
          <div style="height: 30px"></div>
          <div class="user-list">

            <a class="user" v-for="user in profile.team.team">
              <div class="user-in">
                <!-- TODO: on server change user.pictureURI to be from assets/ default -->
                <!-- TODO: if @gmail can we fetch and download people's gmail profile pic -->
                <img :src="'assets/' + (user.member.pictureURI || 'img/avatar.png')">
                <div class="no-mobile sc">{{user.member.name}}</div>
                <span><img src="assets/icons/sidebar-edit.svg"> New email</span>
              </div>
            </a>

          </div>
          <a class="invite-icon" tflow="down">
            <img src="assets/icons/sidebar-invite.svg">
            <span class="blue sc">Invite</span>
          </a>

        </div>


        <!--!------------------------------------------------------------->
        <!-- ? Sidebar Announcements -->
        <!-- ! Only display one at a time! -->
        <!--!------------------------------------------------------------->
        <div class="announce sc no-mobile" style="display: none;">
          <h1><span class="blue fw700">Send an invite</span></h1>
          <p>You have 3 VIP invites remaining</p>
          <a target="_blank" class="sbtn">Invite now</a>
          <a target="_blank" class="sbtn-sec">Later</a>
        </div>

        <div class="announce sc no-mobile load-sidebar" style="display: none;">
          <h1><span class="blue fw700">Downloading Update</span></h1>
          <p>Do not quit the app during the download.</p>
        </div>

        <div class="announce sc no-mobile load-sidebar" style="display: none">
          <h1><span class="blue fw700">Update Ready</span></h1>
          <p>Restart to install.</p>
          <a target="_blank" class="sbtn">Restart Now</a>
        </div>

        <div class="announce sc no-mobile" style="display: none;">
          <h1>Version: <span class="blue fw700">ALPHA</span></h1>
          <p>Request features and report issues</p>
          <a target="_blank" class="sbtn">Give feedback</a>
        </div>


        <!--!------------------------------------------------------------->
        <!-- ? Sidebar Footer -->
        <!--!------------------------------------------------------------->
        <div class="row bottom">
          <div @click="collapseSidebar = !collapseSidebar" title="Toggle collapse sidebar"
            class="sidebar-collapse no-mobile">
            <img src="assets/icons/sidebar-collapse.svg">
          </div>
          <br>
          <div class="set">
            <a href="settings.html"><img src="assets/icons/sidebar-settings.svg" width="30"></a>
            <a tooltip="Documentation" class="no-mobile sc" target="_blank"><img src="assets/icons/sidebar-help.svg"
                width="30"></a>
          </div>
        </div>
      </div>
    </div>

    <!--!------------------------------------------------------------->
    <!-- ? Main View -->
    <!--!------------------------------------------------------------->
    <div class="main">

      <!--!------------------------------------------------------------->
      <!-- ? Toasts -->
      <!-- TODO: these should disappear after 10s -->
      <!--!------------------------------------------------------------->
      <!-- TOAST Invite Sent -->
      <div class="aiko-toast" style="display: none">
        <p class="textinout">Sending invite</p><a>Undo</a>
        <div class="t-loader"><span></span></div>
      </div>

      <!-- TOAST Connection Lost -->
      <div class="aiko-toast" style="display: none">
        <p class="textinout" style="color: #dc3545 !important">We're having trouble connecting to the internet</p>
        <div class="t-loader-red"><span></span></div>
      </div>

      <!-- TOAST IMAP Error -->
      <div class="aiko-toast" style="display: none;">
        <p class="textinout" style="color: #dc3545 !important">
          We're having issues connecting to your mail provider, but will keep trying.
        </p>
        <div class="t-loader-red"><span></span></div>
      </div>

      <!-- TOAST Send Email Error -->
      <div class="aiko-toast" style="display: none;">
        <p class="textinout" style="color: #dc3545 !important">We were unable to send your message due to network
          issues</p>
        <div class="t-loader-red"><span></span></div>
      </div>

      <!-- TOAST Sending Email -->
      <div class="aiko-toast" style="display: none;">
        <p class="textinout">Sending email</p><a>Undo</a>
        <div class="t-loader"><span></span></div>
      </div>

      <!--!------------------------------------------------------------->
      <!-- ? Top Bar -->
      <!--!------------------------------------------------------------->
      <div class="header">
        <div class="container">
          <div class="row">

            <!--!------------------------------------------------------------->
            <!-- ? Mailbox Picker -->
            <!--!------------------------------------------------------------->
            <div class="col-lg-3 col-md-4 col-2">
              <div class="picker">

                <!-- Currently loaded mailbox -->
                <div class="account">
                  <img src="assets/icons/header-user.svg"> <span>{{imapConfig?.email}}</span>
                </div>

                <!-- Other mailboxes -->
                <div class="account" @click="switchMailbox(mailbox)" v-for="mailbox in mailboxes"
                  v-if="mailbox != imapConfig?.email">
                  <img src="assets/icons/header-user.svg"> <span>{{mailbox}}</span>
                  <span class="sec-notif"></span>
                </div>

                <div @click="addMailbox = true" class="account">
                  <img src="assets/icons/header-plus.svg"> <span>Add a mailbox</span>
                </div>
              </div>
            </div>


            <!--!------------------------------------------------------------->
            <!-- ? Search -->
            <!--!------------------------------------------------------------->
            <div class="col-lg-5 col-md-6 col-6 p0m">
              <div class="search">
                <img src="assets/icons/header-search.svg"><input type="" name="" placeholder="Search">
              </div>
              <!-- TODO: Rig search + search dropdown -->
              <div class="search-drop" style="display: none;">
                <a>
                  <div>Subject contains "<span>Ruben</span>"</div>
                </a>
                <hr>
                <p>People</p>
                <a>
                  <div>ruben@priansh.com</div>
                </a>
                <a>
                  <div>rubencharles@gmail.com</div>
                </a>
                <a>
                  <div>rubencharlestouitou@gmail.com</div>
                </a>
              </div>
            </div>


            <!--!------------------------------------------------------------->
            <!-- ? Header Menu -->
            <!--!------------------------------------------------------------->
            <div class="col-lg-4 col-md-2 col-4 text-right side" style="white-space: nowrap;">

              <!--!------------------------------------------------------------->
              <!-- ? Open Calendar -->
              <!--!------------------------------------------------------------->
              <a @click="openCalendar" class="inline">
                <img src="assets/icons/header-calendar.svg">
              </a>

              <!--!------------------------------------------------------------->
              <!-- ? Notifications -->
              <!--!------------------------------------------------------------->
              <div class="dropdown inline">
                <a data-toggle="dropdown">
                  <img src="assets/icons/header-bell.svg">
                  <!-- TODO: rig notif-count, the badge notification count by the bell-->
                  <span class="notif-count">3</span>
                </a>
                <div class="dropdown-menu notif" style="margin-top: 10px">
                  <div class="container">
                    <a>
                      <div class="row">
                        <div class="col-1">
                          <img src="assets/icons/notif-click.svg" width="10">
                        </div>
                        <div class="col-7 notif-c">
                          Ruben opened "Re: Meeting this saturday"
                        </div>
                        <div class="col-3 notif-t p0">
                          35m
                        </div>
                      </div>
                    </a>
                    <a>
                      <div class="row">
                        <div class="col-1">
                          <img src="assets/icons/notif-invite.svg" width="10">
                        </div>
                        <div class="col-7 notif-c">
                          Prinakashiose joined your team
                        </div>
                        <div class="col-3 notif-t p0">
                          3h
                        </div>
                      </div>
                    </a>
                    <a>
                      <div class="row">
                        <div class="col-1">
                          <img src="assets/icons/notif-eye.svg" width="10">
                        </div>
                        <div class="col-7 notif-c">
                          John opened "Can you meet at ..."
                        </div>
                        <div class="col-3 notif-t p0">
                          Yesterday
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--!------------------------------------------------------------->
      <!-- ? Inbox Kanban Boards -->
      <!--!------------------------------------------------------------->
      <div class="boards-container">
        <!-- TODO: rig settings to add 'zero-lines, one-lines, two-lines, three-lines'  to 'boards'-->
        <!-- TODO: add 'regular' class  to 'boards' class to make it regular non-board view-->
        <!-- TODO: add 'no-action-bar' class  to 'boards' class to remove action b ar from all emails-->
        <div class="boards two-lines">

          <!--!------------------------------------------------------------->
          <!-- ? Inbox Board (special case) -->
          <!--!------------------------------------------------------------->
          <div :class="{
            'board': true,
            'inbox': true,
            'load-board': syncing
          }">

            <!--!------------------------------------------------------------->
            <!-- ? Board Header -->
            <!--!------------------------------------------------------------->
            <div class="board-header">
              <div class="container p0">
                <div class="row" style="display: -webkit-inline-box">

                  <!--!------------------------------------------------------------->
                  <!-- ? Board Actions -->
                  <div class="col-1 cll">
                    <div class="dropdown">
                      <a tooltip="Board options" data-toggle="dropdown"><img src="assets/icons/board-dots.svg"></a>
                      <div class="dropdown-menu">
                        <h6 class="dropdown-header">Actions</h6>
                        <a class="dropdown-item">Mark all as read</a>
                        <a class="dropdown-item">Mark all as unread</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item">Board rules</a>
                      </div>
                    </div>
                  </div>


                  <!--!------------------------------------------------------------->
                  <!-- ? Boards Sorting & Display Controls -->
                  <!-- ? TODO: This sorts all boards at once -->
                  <!--!------------------------------------------------------------->
                  <div class="col-1 cll">
                    <div class="dropdown">
                      <a tooltip="Sort and filter emails" data-toggle="dropdown"><img src="assets/icons/sort.svg"></a>
                      <div class="dropdown-menu">
                        <h6 class="dropdown-header">Sort by</h6>
                        <a class="dropdown-item" @click="sortThreads(true)">Date (newest)</a>
                        <a class="dropdown-item" @click="sortThreads(false)">Date (oldest)</a>
                        <h6 class="dropdown-header">Display only</h6>
                        <a @click="seenFilter = null" class="dropdown-item">All</a>
                        <a @click="seenFilter = false" class="dropdown-item">Unread</a>
                        <a @click="seenFilter = true" class="dropdown-item">Read</a>
                      </div>
                    </div>
                  </div>


                  <!--!------------------------------------------------------------->
                  <!-- ? Force Sync (inbox only) -->
                  <!--!------------------------------------------------------------->
                  <div class="col-1 cll">
                    <a v-if="backendSyncing" tooltip="Force refresh">
                      <img class="rotating" src="assets/icons/refresh.svg" width="17">
                    </a>
                    <a v-if="!backendSyncing" @click="forceSync" tooltip="Force refresh">
                      <img src="assets/icons/refresh.svg" width="17">
                    </a>
                  </div>


                  <!--!------------------------------------------------------------->
                  <!-- ? Priority/Other Switcher -->
                  <!--!------------------------------------------------------------->
                  <div class="col-8 text-center exp nowrap">
                    <div class="inbox-switch left text-center">
                      <!-- TODO: Add 'active' ti whichever is active, see below-->
                      <h1 :class="{
                        'inbox1': true,
                        'active': priority
                      }" @click="priority = true" inbox-direction="left">
                        Priority
                        <div class="secondary-count" tooltip="Unread emails in your inbox">
                          {{smartPriorityUnread}}
                        </div>
                      </h1>
                      <h1 :class="{
                        'inbox2': true,
                        'active': !priority
                      }" @click="priority = false" inbox-direction="right">Others</h1>
                    </div>
                  </div>

                </div>
              </div>
            </div>


            <!--!------------------------------------------------------------->
            <!-- ? Inbox Thread List -->
            <!--!------------------------------------------------------------->
            <div ref="inboxBoard" @scroll="onScroll" class="board-body">

              <!--!------------------------------------------------------------->
              <!-- ? Draggable List -->
              <!--!------------------------------------------------------------->
              <draggable id="aikomail--inbox" v-if="!loading" v-model="inbox" filter=".dont-drag-this"
                draggable=".email" ghost-class="ghost" :group="{name: 'emails'}" :force-fallback="true"
                :fallback-on-body="true" :fallback-tolerance="5" @end="moveThread" @clone="cloneThread">
                <!-- * We leave the slug prop out to indicate that it is in the inbox -->
                <thread-card v-for="(tid, i) in inbox"
                  v-if="threads[tid] && threads[tid].priority == priority && (seenFilter == null || threads[tid].seen == seenFilter)"
                  :key="tid" :sort="false" :render="i >= visibleMin && visibleMax >= i"
                  :focused-folder.camel="focused.folder" :focused-index.camel="focused.index"
                  :view-focused.camel="focused.view" :quick-focused.camel="focused.quickReply" :thread="threads[tid]"
                  :index="i"></thread-card>
              </draggable>


              <!--!------------------------------------------------------------->
              <!-- ? List Loader -->
              <!--!------------------------------------------------------------->
              <div class="inbox-more">
                <p @click="priority = false"><img src="assets/icons/filter-inbox.svg"> <span>Click here to see
                  </span><b>{{otherInbox.length}}</b> filtered
                  <span>threads</span></p>
                <div class="load-bottom">
                </div>
              </div>

            </div>
          </div>


          <!-- TODO: Boards should be draggable ----------->
          <!-- TODO: Add 'thin' to 'board' when click on board title ----------->


          <!--!------------------------------------------------------------->
          <!-- ? Container for the other boards (draggable so you can adjust board order) -->
          <!--!------------------------------------------------------------->
          <draggable style="display: inline-flex;" v-model="boardOrder" :group="{name: 'boards'}" draggable=".board"
            ghost-class="ghost" handle=".board-drag-handle" :force-fallback="true" :fallback-on-body="true"
            @end="reorderBoards" :fallback-tolerance="5">
            <!--!------------------------------------------------------------->
            <!-- ? Board Template -->
            <!--!------------------------------------------------------------->
            <board v-for="slug in boardOrder" :syncing="syncing" :board="resolveBoard(slug)" :slug="slug"
              :seen-filter.camel="seenFilter" inline-template>

              <div :class="{
                'board': true,
                'load-board': syncing,
                'thin': board?.thin
              }">

                <!--!------------------------------------------------------------->
                <!-- ? Board Header -->
                <!--!------------------------------------------------------------->
                <div class="board-header board-drag-handle">
                  <div class="container p0">
                    <div class="row">

                      <!--!------------------------------------------------------------->
                      <!-- ? Board Actions -->
                      <!--!------------------------------------------------------------->
                      <div class="col-2 cll">
                        <div class="dropdown">
                          <a tooltip="Board options" data-toggle="dropdown"><img src="assets/icons/board-dots.svg"></a>
                          <div class="dropdown-menu">
                            <h6 class="dropdown-header">Actions</h6>
                            <a class="dropdown-item">Mark all as read</a>
                            <a class="dropdown-item">Mark all as unread</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item">Board rules</a>
                            <a v-if="slug != 'Done'" class="dropdown-item red" style="color: #dc3545 !important">Delete
                              board</a>
                          </div>
                        </div>
                      </div>


                      <!--!------------------------------------------------------------->
                      <!-- ? Board Title (click to thin/thicc) -->
                      <!--!------------------------------------------------------------->
                      <div class="col-8 text-center p0 exp margin-auto nowrap">
                        <h1 @click="board.thin = !board.thin" tooltip="Click title to minimize/maximize">
                          {{slug}}
                        </h1>
                        <div v-if="unread > 0 && slug != 'Done'" class="secondary-count"
                          tooltip="Unread emails in board">
                          {{unread > 99 ? '99+' : unread}}
                        </div>
                        <div v-if="slug == 'Done'" class="archive" tooltip="Trash entire board">
                          <img src="assets/icons/sidebar-trash.svg">
                          Trash all
                        </div>
                      </div>

                      <!--!------------------------------------------------------------->
                      <!-- ? Board Drag Handle -->
                      <!--!------------------------------------------------------------->
                      <div class="col-2 text-right cll">
                        <!-- ! Testing a UI without this -->
                        <a v-if="false" class="board-drag-handle" tooltip="Drag board"><img
                            src="assets/icons/board-dots2.svg"></a>
                      </div>
                    </div>
                  </div>
                </div>

                <!--!------------------------------------------------------------->
                <!-- ? Board Thread List -->
                <!--!------------------------------------------------------------->
                <div class="board-body">

                  <!--!------------------------------------------------------------->
                  <!-- ? Draggable List -->
                  <!--!------------------------------------------------------------->
                  <draggable :id="'aikomail--' + slug" v-if="board" v-model="board.tids" filter=".dont-drag-this"
                    draggable=".email" ghost-class="ghost" :group="{name: 'emails'}" :force-fallback="true"
                    :fallback-on-body="true" :fallback-tolerance="5" @start="startMove" @end="moveThread">
                    <!-- Single Email ---------- add class 'drag' when dragged ------->
                    <thread-card v-for="(tid, i) in board.tids" v-if="(seenFilter == null || thread.seen == seenFilter)"
                      :key="tid" :sort="false" :render="true" :focused-folder.camel="focused.folder"
                      :focused-index.camel="focused.index" :view-focused.camel="focused.view"
                      :quick-focused.camel="focused.quickReply" :thread="threads[tid]" :index="i" :slug="slug">
                    </thread-card>
                  </draggable>


                  <!--!------------------------------------------------------------->
                  <!-- ? Board Empty Helper Text -->
                  <!--!------------------------------------------------------------->
                  <div class="empty" v-if="board?.tids?.length == 0">
                    <h1>Drag emails here.</h1>
                  </div>
                </div>
              </div>

            </board>
          </draggable>


          <!--!------------------------------------------------------------->
          <!-- ? Long Board for regular inbox view -->
          <!--!------------------------------------------------------------->
          <div class="long-board">
            <!-- copy <div class="main-email"> template here when needed-->
          </div>


          <!--!------------------------------------------------------------->
          <!-- ? Add Board Button -->
          <!--!------------------------------------------------------------->
          <div class="add-board" @click="addBoard = true">
            <img src="assets/icons/boards-add.svg">
          </div>

        </div>
      </div>
    </div>

    <!--!------------------------------------------------------------->
    <!-- ? Modals -->
    <!--!------------------------------------------------------------->
    <!-- MODAL Invite Team Member --------------------------------------->
    <div class="aiko-modal" style="display: none;">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-reg">
            <img src="assets/icons/sidebar-invite.svg" width="40" style="margin-bottom: 5px;">
            <h1>Invite a team member</h1>
            <h2>Enter their email address</h2>
            <input type="email" name="" placeholder="Email">
            <p>We'll send them a link to Aiko Mail.</p>
            <br>
            <a class="blue">Done</a>
            <p class="ns30"></p>
            <br>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL Upgrade for Quick Actions -->
    <div class="aiko-modal" style="display: none;">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <img src="assets/icons/grey-x.svg" data-dismiss="modal" class="x-email">
          <div class="modal-reg">
            <img v-if="isDarkMode" src="assets/img/logo-white.svg" width="140"
              style="margin-bottom: 15px;margin-top:10px">
            <img v-if="!isDarkMode" src="assets/img/logo.svg" width="140" style="margin-bottom: 15px;margin-top:10px">
            <h1>You found a premium feature.</h1>
            <img v-if="isDarkMode" src="assets/img/u-quick-black.png" width="300">
            <img v-if="!isDarkMode" src="assets/img/u-quick-white.png" width="300">
            <br>
            <p style="max-width: 400px;margin: auto;margin-bottom: 10px;">Quick actions detects intent in your emails
              and lets you manage them with the click of a button.</p><br> <br>
            <div class="modal-bottom">
              <a class="blue">Get Started</a>
            </div>
            <p class="ns30"></p>
            <br>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL Upgrade for more mailboxes -->
    <div class="aiko-modal" style="display: none;">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <img src="assets/icons/grey-x.svg" data-dismiss="modal" class="x-email">
          <div class="modal-reg">
            <img v-if="isDarkMode" src="assets/img/logo-white.svg" width="140"
              style="margin-bottom: 15px;margin-top:10px">
            <img v-if="!isDarkMode" src="assets/img/logo.svg" width="140" style="margin-bottom: 15px;margin-top:10px">
            <h1>You found a premium feature.</h1>
            <img v-if="isDarkMode" src="assets/img/u-mailbox-black.png" width="250">
            <img v-if="!isDarkMode" src="assets/img/u-mailbox-white.png" width="250">
            <br> <br>
            <p style="max-width: 300px;margin: auto;margin-bottom: 10px;">Add email accounts and seamlessly switch
              between all your
              mailboxes.</p><br><br>
            <div class="modal-bottom">
              <a class="blue">Get Started</a>
            </div>
            <p class="ns30"></p>
            <br>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL Upgrade for notifications -->
    <div class="aiko-modal" style="display: none;">
      <div class="modal-dialog modal-md">
        <div class="modal-content">
          <img src="assets/icons/grey-x.svg" data-dismiss="modal" class="x-email">
          <div class="modal-reg">
            <img v-if="isDarkMode" src="assets/img/logo-white.svg" width="140"
              style="margin-bottom: 15px;margin-top:10px">
            <img v-if="!isDarkMode" src="assets/img/logo.svg" width="140" style="margin-bottom: 15px;margin-top:10px">
            <h1>You found a premium feature.</h1>
            <img v-if="isDarkMode" src="assets/img/u-notif-black.png" width="300">
            <img v-if="!isDarkMode" src="assets/img/u-notif-white.png" width="300">
            <br><br>
            <p style="max-width: 300px;margin: auto;margin-bottom: 10px;">Upgrade today to get notified when
              someone opens your emails or joins your team.</p><br> <br>
            <div class="modal-bottom">
              <a class="blue">Get Started</a>
            </div>
            <p class="ns30"></p>
            <br>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL Tutorial Video -->
    <tutorial-modal v-if="firstTime" inline-template>
      <div class="aiko-modal">
        <div class="modal-dialog modal-md">
          <div class="modal-content">
            <div class="modal-reg">
              <h1>Welcome to Aiko Mail</h1>
              <h2>Watch this tutorial to get started!</h2>
              <!-- TODO: change this to tutorial video once we have one -->
              <video controls src="assets/videos/"></video>
            </div>
            <br><br>
            <div class="modal-bottom">
              <a @click="close" class="blue" style="float: right;">Skip Tutorial</a>
            </div>
          </div>
        </div>
      </div>
    </tutorial-modal>

    <!-- MODAL View Thread -->
    <view-thread v-if="viewThread" :thread="viewThread" inline-template>

      <div @click.self="close" class="aiko-modal">

        <div class="modal-dialog modal-lg">

          <!--!------------------------------------------------------------->
          <!-- ? ESCAPE TIP -->
          <!--!------------------------------------------------------------->
          <p class="esc-tip">press <b>ESC</b></p>


          <!--!------------------------------------------------------------->
          <!-- ? Thread Container -->
          <!--!------------------------------------------------------------->
          <div class="modal-content">

            <!--!------------------------------------------------------------->
            <!-- ? Message List -->
            <!--!------------------------------------------------------------->
            <div class="main-email">

              <!--!------------------------------------------------------------->
              <!-- ? Datepicker for Schedule Quick Action -->
              <!-- TODO: move this out -->
              <!--!------------------------------------------------------------->
              <div class="modal-dialog modal-md datepick" v-if="false">
                <div class="modal-content">
                  <div class="modal-reg">
                    <h1 class="mt-2">Please change or confirm suggested time.</h1>
                    <h2 class="mt-3 mb-2"><b>"Tomorrow after work"</b></h2>
                    <input type="datetime-local">
                    <br>
                    <label class="switch mr-1 mt-2">
                      <input type="checkbox" />
                      <span class="slider round cal"></span>
                    </label>
                    <p style="max-width: 300px;margin: auto;display: inline;">Add event to my calendar</p>
                    <br><br><br>
                    <div class="modal-bottom">
                      <a class="blue">Compose</a>
                    </div>
                    <p class="ns30"></p>
                    <br>
                  </div>
                </div>
              </div>

              <!-- TODO: Ruben, make sure shadow light mode not bad-->
              <!--!------------------------------------------------------------->
              <!-- ? Thread Messages -->
              <!--!------------------------------------------------------------->
              <view-email v-for="(email, i) in fullThread.emails" :email="email" :expanded="i == 0" :key="i"
                :tid="thread.tid">
              </view-email>
            </div>


            <!--!------------------------------------------------------------->
            <!-- ? Thread Sidebar -->
            <!--!------------------------------------------------------------->
            <div class="secondary-email">

              <!--!------------------------------------------------------------->
              <!-- ? Contact Information (probably move this to message header and replace with reply, reply all, etc) -->
              <!--!------------------------------------------------------------->
              <div class="secondary-head">
                <h3>Participants </h3>
                <div class="container">


                  <!--!------------------------------------------------------------->
                  <!-- ? Participant Avatar + Contact Info -->
                  <!--!------------------------------------------------------------->
                  <div class="row h67">
                    <div class="col-3 p0 avtr">
                      <img :src="avatar">
                    </div>
                    <div class="col-9 p0 spe hover-name">
                      <h1>{{email.M.envelope.from.name}}</h1>
                      <h2>{{email.M.envelope.from.address}}</h2>

                      <p>NEW EMAIL</p> <!-- This is an option, could be anything we want really-->
                      <p>COPY</p> <!-- This is an option, could be anything we want really-->
                      <p>INVITE</p> <!-- This is an option, could be anything we want really-->
                    </div>
                  </div>


                  <!--!------------------------------------------------------------->
                  <!-- ? Participant Avatar + Contact Info -->
                  <!--!------------------------------------------------------------->
                  <div class="row h67">
                    <div class="col-3 p0 avtr">
                      <img :src="avatar">
                    </div>
                    <div class="col-9 p0 spe hover-name">
                      <h1>{{email.M.envelope.from.name}}</h1>
                      <h2>{{email.M.envelope.from.address}}</h2>

                      <p>NEW EMAIL</p> <!-- This is an option, could be anything we want really-->
                      <p>COPY</p> <!-- This is an option, could be anything we want really-->
                      <p>INVITE</p> <!-- This is an option, could be anything we want really-->
                    </div>
                  </div>


                  <!--!------------------------------------------------------------->
                  <!-- ? Participant Avatar + Contact Info -->
                  <!--!------------------------------------------------------------->
                  <div class="row h67">
                    <div class="col-3 p0 avtr">
                      <img :src="avatar">
                    </div>
                    <div class="col-9 p0 spe hover-name">
                      <h1>{{email.M.envelope.from.name}}</h1>
                      <h2>{{email.M.envelope.from.address}}</h2>

                      <p>NEW EMAIL</p> <!-- This is an option, could be anything we want really-->
                      <p>COPY</p> <!-- This is an option, could be anything we want really-->
                      <p>INVITE</p> <!-- This is an option, could be anything we want really-->
                    </div>
                  </div>



                </div>
              </div>

              <!--!------------------------------------------------------------->
              <!-- ? Board Change -->
              <!--!------------------------------------------------------------->
              <div class="dark-side">
                <h4>Current board</h4>
                <select class="aiko-select">
                  <option>Unrigged</option>
                </select>
              </div>

              <!--!------------------------------------------------------------->
              <!-- ? Related Threads -->
              <!--!------------------------------------------------------------->
              <h3>Other conversations with {{email.M.envelope.from.name}}</h3>
              <div class="previous-threads sec-sec">
                <div class="email thread">
                  <div class="container pr">
                    <div class="row" style="user-select: none;">
                      <div class="col-8 p0" style="display: inline-flex;">
                        <p class="subject">This is the subject</p>
                      </div>
                      <div class="col-4 p0">
                        <div class="time">6:18PM</div>
                      </div>

                      <p class="body">This is the main content of the email, it is suppose to be
                        longer than the subject and a summary of the main content.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </view-thread>

    <!-- MODAL Add Mailbox --------------------------------------->
    <add-mailbox-modal v-if="addMailbox" :success="switchMailServer" :googlestrategy="google_addMailbox"
      :msftstrategy="msft_addMailbox" :closable="!forceAddMailbox" inline-template>
      <div class="aiko-modal add-mailbox">
        <!-- STEP ONE --->
        <div class="modal-dialog modal-md" v-if="step == 1">
          <!--!------------------------------------------------------------->
          <!-- ? ESCAPE TIP -->
          <!-- TODO: Make Modal exitable by click out or ESC-->
          <!--!------------------------------------------------------------->
          <p class="esc-tip">press <b>ESC</b></p>

          <div class="modal-content">
            <div class="modal-reg">
              <h1>Add a mailbox</h1>
              <h2>Pick an email provider</h2>
              <!-- <a><img src="assets/img/icloud.png"></a> -->
              <a><img @click="addOutlook" src="assets/img/outlook.png"></a>
              <a><img @click="addGoogle" src="assets/img/google.png"></a>
              <!-- <a><img src="assets/img/yahoo.png"></a> -->
              <!-- <a><img src="assets/img/aol.png"></a> -->
              <a><img @click="addMicrosoft" src="assets/img/exchange.png"></a>
              <br>
            </div>
            <div class="modal-bottom">
              <a @click="addOther">Other</a>
            </div>
          </div>
        </div>
        <!-- STEP TWO --->
        <div class="modal-dialog modal-md" v-if="step == 2">
          <div class="modal-content">
            <div class="modal-reg">
              <h1>Add a mailbox</h1>
              <h2>Enter your credentials</h2>
              <a>
                <!-- TODO: use clearbit to auto-show the user's email provider -->
                <img v-if="imapConfig.provider == 'microsoft'" src="assets/img/outlook.png">
              </a>
              <p v-if="error" class="alert alert-danger">{{error}}</p>
              <input v-model="imapConfig.user" type="email" name="" placeholder="Email">
              <input v-model="imapConfig.pass" type="password" name="" placeholder="Password">
              <input v-model="imapConfig.host" type="url" name="" placeholder="IMAP Host">
              <input v-model="imapConfig.port" type="number" name="" placeholder="IMAP Port">
              <input v-model="smtpConfig.host" type="url" name="" placeholder="SMTP Host">
              <input v-model="smtpConfig.port" type="number" name="" placeholder="SMTP Port">
              <br><br>
              <a v-if="!loading" @click="saveConfig" class="blue">Add mailbox</a>
              <!-- TODO: CHANGE LOADER HERE RUBEN-->
              <div v-if="loading" class="cs-loader">
                <div class="cs-loader-inner">
                  <label> </label>
                  <label> </label>
                  <label> </label>
                  <label> </label>
                  <label> </label>
                  <label> </label>
                </div>
              </div>
              <br><br>
            </div>
            <div v-if="!loading" class="modal-bottom">
              <a @click="back">Back</a>
            </div>
          </div>
        </div>

      </div>
    </add-mailbox-modal>

    <!-- MODAL Add Board --------------------------------------->
    <add-board-modal v-if="addBoard" inline-template>
      <div class="aiko-modal addb" @click.self="close">
        <div class="modal-dialog modal-sm">

          <!--!------------------------------------------------------------->
          <!-- ? ESCAPE TIP -->
          <!-- TODO: Make Modal exitable by  ESC-->
          <!--!------------------------------------------------------------->
          <p class="esc-tip">press <b>ESC</b></p>


          <div class="modal-content">

            <!--!------------------------------------------------------------->
            <!-- ? Board-Create Form -->
            <!--!------------------------------------------------------------->
            <div class="modal-reg">

              <img src="assets/icons/new-board.svg" width="40" style="margin-bottom: 5px;">

              <h1>Add a board</h1>

              <input v-model="name" type="text" placeholder="Board name" minlength="1" maxlength="13" class="cap"
                style="margin-top: -20px;" autofocus>

              <br><br>

              <div v-if="name && validBoard" class="modal-bottom">
                <!-- TODO: should automatically open the board rules modal for this board -->
                <a @click="addBoard">Add</a>
              </div>

              <div v-if="!name" class="modal-bottom">
                <h2>Please enter a name to continue.</h2>
              </div>

              <div v-if="!validBoard" class="modal-bottom">
                <h2 class="red">A board with that name already exists.</h2>
              </div>

              <br>

            </div>
          </div>
        </div>
      </div>
    </add-board-modal>

    <dev-controls v-if="showDev" :delete-cache.camel="deleteCache" inline-template>
      <div style="z-index: 9999" class="aiko-modal" @click.self="close">
        <div class="modal-dialog modal-md">
          <div class="modal-content">
            <div class="modal-reg">
              <h1>Developer Controls</h1>
              <a>
                <img style="max-width: 190px; margin: auto" src="assets/img/logo.svg">
              </a>
              <br>
              <br>
              <a @click="deleteCache(emails=true)" class="btn btn-warning">Clear Email Cache</a>
              <br>
              <br>
              <a @click="deleteCache(prefs=true)" class="btn btn-warning">Clear Settings</a>
              <br>
              <br>
              <a @click="deleteCache(chrome=true)" class="btn btn-warning">Clear Inbox Cache</a>
              <br>
              <br>
              <a @click="deleteCache(emails=true, prefs=true, chrome=true)" class="btn btn-danger text-white">Clear ALL
                Cache</a>
              <br>
              <br>
              <a @click="testIMAP" class="btn btn-dark text-white">Test IMAP Connection</a>
              <img v-if="imapValid === true" style="filter: invert(1)" src="assets/icons/check-circle.svg">
              <img v-if="imapValid === false" src="assets/icons/x-white.svg">
              <br>
              <br>
              <a @click="testSMTP" class="btn btn-dark text-white">Test SMTP Connection</a>
              <img v-if="smtpValid === true" style="filter: invert(1)" src="assets/icons/check-circle.svg">
              <img v-if="smtpValid === false" src="assets/icons/x-white.svg">
              <br>
              <br>
              <a @click="testConnection" class="btn btn-light">Test Mail Connection</a>
              <br>
              <br>
              <br>
            </div>
            <div class="modal-bottom text-center">
              <a @click="close">Close</a>
            </div>
          </div>
        </div>
      </div>
    </dev-controls>

    <!-- MODAL Board Rules --------------------------------------->
    <div class="aiko-modal" style="display: none;">
      <div class="modal-dialog modal-md mw600">
        <div class="modal-content">
          <div class="modal-reg">
            <img src="assets/icons/new-board.svg" width="40" style="margin-bottom: 5px;">
            <h1><b>[BOARDNAME]</b> board rules</h1>
            <br>
            <div class="container-rules">
              <div class="row margin-auto existing-rules">
                <div class="col-3">
                  <p class="margin-auto text-left">if from: </p>
                </div>
                <div class="col-3">
                  <p class="margin-auto blue text-left">ruben@pri.com</p>
                </div>
                <div class="col-2">
                  <p class="margin-auto text-left">move to: </p>
                </div>
                <div class="col-2">
                  <p class="margin-auto blue">To-Do</p>
                </div>
                <div class="col-2">
                  <a class="red margin-auto text-right">Delete</a>
                </div>
              </div>


              <div class="row margin-auto existing-rules">
                <div class="col-3">
                  <p class="margin-auto text-left">if from: </p>
                </div>
                <div class="col-3">
                  <p class="margin-auto blue text-left">ruben@pri.com</p>
                </div>
                <div class="col-2">
                  <p class="margin-auto text-left">move to: </p>
                </div>
                <div class="col-2">
                  <p class="margin-auto blue">To-Do</p>
                </div>
                <div class="col-2">
                  <a class="red margin-auto text-right">Delete</a>
                </div>
              </div>
            </div>
            <br>
            <div class="accordion" id="accordionExample">
              <div class="card b0">
                <div class="card-header" id="headingOne" style="background: var(--main-bg-color);">
                  <h2 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
                      aria-expanded="true" aria-controls="collapseOne">
                      Add new rule
                    </button>
                  </h2>
                </div>
                <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                  <div class="row margin-auto existing-rules">
                    <div class="col-3">
                      <select class="aiko-select">
                        <option value="1" selected="selected">If from: </option>
                        <option value="2">If contains: </option>
                        <option value="2">If date: </option>
                        <option value="2">If flagged: </option>
                        <option value="2">If attcht: </option>
                        <option value="2">If contains: </option>
                        <option value="2">If contains: </option>

                      </select>
                    </div>

                    <!-- Inside this one will be dynamic depending on previous selection
                  (text/email/date etc)   --------------------------------------->
                    <div class="col-3">
                      <input type="text" name="rulesField" placeholder="Email">
                    </div>

                    <div class="col-2">
                      <p class="margin-auto text-left">move to: </p>
                    </div>
                    <div class="col-2">
                      <select class="aiko-select">
                        <option value="1" selected="selected">To-Do</option>
                        <option value="2">Done</option>
                      </select>
                    </div>
                    <div class="col-2">
                      <a class="blue margin-auto text-right">Add</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <p style="margin-top: 25px;margin-bottom: 0">Check <a class="blue">Inbox rules</a> to see if emails ae being
              automatically added to this board.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- MODAL Inbox Rules -------------------------------------->
    <div class="aiko-modal" style="display: none;">
      <div class="modal-dialog modal-md mw600">
        <div class="modal-content">

          <div class="modal-reg">
            <img src="assets/icons/new-board.svg" width="40" style="margin-bottom: 5px;">
            <h1><b>Inbox</b> board rules</h1>
            <br>
            <div class="container-rules">
              <div class="row margin-auto existing-rules">
                <div class="col-3">
                  <p class="margin-auto text-left">if from: </p>
                </div>
                <div class="col-3">
                  <p class="margin-auto blue text-left">ruben@pri.com</p>
                </div>
                <div class="col-2">
                  <p class="margin-auto text-left">move to: </p>
                </div>
                <div class="col-2">
                  <p class="margin-auto blue">To-Do</p>
                </div>
                <div class="col-2">
                  <a class="red margin-auto text-right">Delete</a>
                </div>
              </div>

              <div class="row margin-auto existing-rules">
                <div class="col-3">
                  <p class="margin-auto text-left">Contains: </p>
                </div>
                <div class="col-3">
                  <p class="margin-auto blue text-left">salsa</p>
                </div>
                <div class="col-2">
                  <p class="margin-auto text-left">move to: </p>
                </div>
                <div class="col-2">
                  <p class="margin-auto blue">Done</p>
                </div>
                <div class="col-2">
                  <a class="red margin-auto text-right">Delete</a>
                </div>
              </div>

              <div class="row margin-auto existing-rules">
                <div class="col-3">
                  <p class="margin-auto text-left">if from: </p>
                </div>
                <div class="col-3">
                  <p class="margin-auto blue text-left">jojo@pri.com</p>
                </div>
                <div class="col-2">
                  <p class="margin-auto text-left">move to: </p>
                </div>
                <div class="col-2">
                  <p class="margin-auto blue">From Jo</p>
                </div>
                <div class="col-2">
                  <a class="red margin-auto text-right">Delete</a>
                </div>
              </div>

              <div class="row margin-auto existing-rules">
                <div class="col-3">
                  <p class="margin-auto text-left">if from: </p>
                </div>
                <div class="col-3">
                  <p class="margin-auto blue text-left">ruben@pri.com</p>
                </div>
                <div class="col-2">
                  <p class="margin-auto text-left">move to: </p>
                </div>
                <div class="col-2">
                  <p class="margin-auto blue">To-Do</p>
                </div>
                <div class="col-2">
                  <a class="red margin-auto text-right">Delete</a>
                </div>
              </div>
            </div>
            <br>
            <div class="accordion" id="accordionExample">
              <div class="card b0">
                <div class="card-header" id="headingOne" style="background: var(--main-bg-color);">
                  <h2 class="mb-0">
                    <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
                      aria-expanded="true" aria-controls="collapseOne">
                      Add new rule
                    </button>
                  </h2>
                </div>
                <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                  <div class="row margin-auto existing-rules">
                    <div class="col-3">
                      <select class="aiko-select">
                        <option value="1" selected="selected">If from: </option>
                        <option value="2">If contains: </option>
                        <option value="2">If date: </option>
                        <option value="2">If flagged: </option>
                        <option value="2">If attcht: </option>
                        <option value="2">If contains: </option>
                        <option value="2">If contains: </option>

                      </select>
                    </div>


                    <!-- Inside this one will be dynamic depending on previous selection
                  (text/email/date etc)   --------------------------------------->
                    <div class="col-3">
                      <input type="text" name="rulesField" placeholder="Email">
                    </div>



                    <div class="col-2">
                      <p class="margin-auto text-left">move to: </p>
                    </div>
                    <div class="col-2">
                      <select class="aiko-select">
                        <option value="1" selected="selected">To-Do</option>
                        <option value="2">Done</option>
                      </select>
                    </div>
                    <div class="col-2">
                      <a class="blue margin-auto text-right">Add</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <p style="margin-top: 25px;margin-bottom: 0">You may add additional rules to other boards separately as
              well.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!--!------------------------------------------------------------->
  <!-- ? Thread Card -->
  <!--!------------------------------------------------------------->
  <script type="text/x-template" id="thread-card">
    <!-- TODO: add 'quick-reply' class here when they click quick reply - adds maximum of 137px in height -->
    <div @blur="unfocus" :ref="thread.tid" :key="thread.tid" :tid="thread.tid" :class="{
        'email': true,
        'unread': !(thread.seen),
        'zero': !(thread.emails[0].M.summary.sentences.length > 0),
        'syncing': thread.syncing,
        'dont-drag-this': thread.syncing,
        'starred': thread.starred,
        'just-me': justMe,
        'focus': false
      }">

      <!-- ? Card content -->
      <div v-if="render !== false" class="container pr" @click="viewMessage">

        <!--!------------------------------------------------------------->
        <!-- ? Preview latest message -->
        <!--!------------------------------------------------------------->
        <div class="row" style="user-select: none;">

          <!--!------------------------------------------------------------->
          <!-- ? Card Header -->
          <!--!------------------------------------------------------------->
          <div class="col-8 p0 exp" style="display: inline-flex;">

            <!--!------------------------------------------------------------->
            <!-- ? Participants -->
            <!--!------------------------------------------------------------->
            <h2 class="sender" @click="debug" v-if="!justMe">
              {{thread.participants.slice(0, 3).map(({ name, address }) => name || address).join(', ')}}
            </h2>
            <h2 class="sender" @click="debug" v-if="justMe">
              Me
            </h2>

            <!--!------------------------------------------------------------->
            <!-- ? Thread indicators -->
            <!--!------------------------------------------------------------->
            <img v-if="thread.emails.length > 1" src="assets/icons/thread.svg">
            <span class="thread-count" v-if="thread.emails.length > 1">{{thread.emails.length}}</span>

            <!--!------------------------------------------------------------->
            <!-- ? Email badges -->
            <!--!------------------------------------------------------------->
            <img v-if="thread.hasAttachments" src="assets/icons/badges-attach.svg">
            <img v-if="thread.hasTrackers" src="assets/icons/badges-tracker.svg">
            <img v-if="quickaction == 'calendar_invite'" src="assets/icons/badges-event.svg">
            <img v-if="thread.bcced" src="assets/icons/badges-bcc.svg">
          </div>

          <!--!------------------------------------------------------------->
          <!-- ? Prettified Date -->
          <!--!------------------------------------------------------------->
          <div class="col-4 p0 cll">
            <div class="time">{{thread.date.toNiceDateTime(6)}}</div>
          </div>

          <!--!------------------------------------------------------------->
          <!-- ? Subject (cleaned) -->
          <!--!------------------------------------------------------------->
          <p class="subject">{{thread.emails[0].M.envelope.cleanSubject}}</p>

          <!--!------------------------------------------------------------->
          <!-- ? Summarized Content -->
          <!--!------------------------------------------------------------->
          <p v-if="thread.emails[0].M.summary.sentences.length > 0" class="body">{{thread.emails[0].M.summary.text}}</p>
        </div>

        <!--!------------------------------------------------------------->
        <!-- ? Card Footer -->
        <!--!------------------------------------------------------------->
        <div class="email-footer dont-drag-this" style="user-select: none;">
          <div class="row">
            <!--!------------------------------------------------------------->
            <!-- ? Quick Actions -->
            <!--!------------------------------------------------------------->
            <div class="col-5 cll cll2 z1">
              <a v-if="quickaction == 'scheduling'" class="main-action ma2">
                <img src="assets/icons/badges-event-blue.svg"> Schedule
              </a>
              <a @click.stop.prevent="openVerify" v-if="quickaction == 'verify'" class="main-action ma2">
                <img src="assets/icons/link.svg"> Verify
              </a>
              <a v-if="quickaction == 'subscribe'" class="main-action ma2">
                <img src="assets/icons/link.svg"> Subscribe
              </a>
              <a v-if="quickaction == 'unsubscribe'" class="main-action ma3">
                <img src="assets/icons/options-unsub.svg"> Unsubscribe
              </a>
              <a v-if="quickaction == 'sign_document'" class="main-action ma2">
                <img src="assets/icons/sign.svg"> Sign
              </a>
              <a v-if="quickaction == 'send_document'" class="main-action ma2">
                <img src="assets/icons/attach.svg"> Attach files
              </a>
              <a @click="copyOTP" v-if="quickaction == 'confirm_code' && thread.emails[0].M.quick_actions.otp"
                class="main-action ma2">
                <img src="assets/icons/clipboard.svg"> {{thread.emails[0].M.quick_actions.otp}}
              </a>
              <a @click="viewMessage" v-if="quickaction == 'confirm_code' && !(thread.emails[0].M.quick_actions.otp)"
                class="main-action ma2">
                <img src="assets/icons/link.svg"> Get Code
              </a>
              <a @click.stop.prevent="showQuickReply = true" v-if="!quickaction" class="main-action ma1">
                <img src="assets/icons/zap.svg"> Quick Reply <span @click.stop.prevent="quickReplyAll = true"
                  class="all">All</span>
              </a>
            </div>

            <!--!------------------------------------------------------------->
            <!-- ? Sync Indicator -->
            <!--!------------------------------------------------------------->
            <div v-if="thread.syncing" class="col-5 sync-message">
              <a class="main-action ma1">
                <img src="assets/icons/refresh.svg" class="rotating ml5"> Syncing
              </a>
            </div>

            <!--!------------------------------------------------------------->
            <!-- ? Common Interactions -->
            <!--!------------------------------------------------------------->
            <div class="col-7 extra-actions cll2">
              <!-- TODO: Once email has been replied to, change below to 'options-replied.png'-->
              <a v-if="isRepliedTo" @click.stop.prevent="reply"><img src="assets/icons/options-replied.png" width="18"></a>
              <a v-else @click.stop.prevent="reply"><img src="assets/icons/options-reply.png" width="18"></a>
              <a @click.stop.prevent="replyAll"><img src="assets/icons/options-replya.png" width="18"></a>
              <a @click.stop.prevent="forward"><img src="assets/icons/options-forward.png" width="15"></a>
              <a @click.stop.prevent="starMessage" v-if="!(thread.starred)"><img src="assets/icons/options-star.svg"
                  width="15"></a>
              <a @click.stop.prevent="unstarMessage" v-if="thread.starred"><img src="assets/icons/badges-star.svg"
                  width="15"></a>
              <a @click.stop.prevent="deleteMessage"><img src="assets/icons/options-trash.svg" class="red"
                  width="15"></a>
            </div>
          </div>
        </div>

        <!--!------------------------------------------------------------->
        <!-- ? Quick Reply -->
        <!--!------------------------------------------------------------->
        <div :class="{
          'note': true,
          'hide': !showQuickReply,
          'dont-drag-this': true
        }">
          <!-- TODO: make it so that when press enter in quick reply it sends rather than open email -->
          <input @keydown.esc.stop.prevent="unfocus" @click.stop="focus" ref="quickreply" @blur="unfocus"
            v-model="replyText" placeholder="Type a reply, press enter to send." autofocus>
          <a @click.stop="sendQuickReply"><img src="assets/icons/compose-send.svg" width="20"></a>
        </div>

      </div>


      <!-- ? Show empty card if it is not supposed to be visible -->
      <div style="height: 106px;" v-else></div>
    </div>
  </script>


  <!--!------------------------------------------------------------->
  <!-- ? View Singular Email -->
  <!--!------------------------------------------------------------->
  <script type="text/x-template" id="view-email">
    <div :class="{
      'single-email': true,
      'short': !expanded
    }">

      <!--!------------------------------------------------------------->
      <!-- ? Message Header -->
      <!--!------------------------------------------------------------->
      <div class="email-head" @click="expanded = !expanded">
        <div class="container">
          <!--!------------------------------------------------------------->
          <!-- ? Preview Metadata -->
          <!--!------------------------------------------------------------->
          <div class="row sender-top">
            <div class="col-8 p0" style="display: inline-flex;height: 22px;">

              <!--!------------------------------------------------------------->
              <!-- ? Message Sender -->
              <!--!------------------------------------------------------------->

              <h2 class="sender">
                {{email.M.envelope.from.name || email.M.envelope.from.address}}
              </h2>


              <!--!------------------------------------------------------------->
              <!-- ? Message Badges -->
              <!--!------------------------------------------------------------->
              <img v-if="email.parsed?.attachments?.length > 0" src="assets/icons/badges-attach.svg">
              <img v-if="email.M.tracker" src="assets/icons/badges-tracker.svg">
              <img v-if="email.M.quick_actions.classification == 'calendar_invite'" src="assets/icons/badges-event.svg">
              <img v-if="email.M.envelope.bcc.length > 0" src="assets/icons/badges-bcc.svg">

            </div>
            <div class="col-4 p0">
              <div class="time">{{new Date(email.M.envelope.date).toNiceDateTime(6)}}</div>
            </div>
          </div>

          <!--!------------------------------------------------------------->
          <!-- ? More Metadata -->
          <!--!------------------------------------------------------------->
          <div class="row">
            <h2 class="fromto-info" @click.stop.prevent="showSenderInfo = !showSenderInfo">

              <!--!------------------------------------------------------------->
              <!-- ? Singular Direct Recipient, Collapsed -->
              <!--!------------------------------------------------------------->
              <div v-if="!showSenderInfo && email.M.envelope.to.length == 1">
                <b>From</b>
                <span>{{email.M.envelope.from.address}}</span>
                <b>to</b>
                <span>{{email.M.envelope.to[0].address}}</span>
                <b v-if="email.M.envelope.cc.length > 0">and {{email.M.envelope.cc.length}} others</b>
              </div>


              <!--!------------------------------------------------------------->
              <!-- ? Multiple Direct Recipients, Collapsed -->
              <!--!------------------------------------------------------------->
              <div v-if="!showSenderInfo && email.M.envelope.recipients.length > 1">
                <b>From</b>
                <span>{{email.M.envelope.from.address}}</span>
                <b>to</b>
                <span v-for="to in email.M.envelope.to.slice(0, 2)">{{to.address}}, </span>
                <b v-if="email.M.envelope.to.length > 2 || email.M.envelope.cc.length > 0">
                  and {{Math.max(email.M.envelope.to.length - 2, 0) + email.M.envelope.cc.length}} others
                </b>
              </div>


              <!--!------------------------------------------------------------->
              <!-- ? Any Recipient, Expanded -->
              <!--!------------------------------------------------------------->
              <div v-if="showSenderInfo" class="more-fromto">
                <b>From </b>
                <span>{{email.M.envelope.from.name ? '"' + email.M.envelope.from.name + '" ' : ''}} {{email.M.envelope.from.address}}</span>
                <br>
                <b>To </b>
                <span v-for="to in email.M.envelope.to">{{to.name ? '"' + to.name + '" ' : ''}} {{to.address}},&nbsp;</span>
                <br v-if="email.M.envelope.cc.length > 0">
                <b v-if="email.M.envelope.cc.length > 0">CC </b>
                <span v-for="cc in email.M.envelope.cc">{{cc.name ? '"' + cc.name + '" ' : ''}} {{cc.address}},&nbsp;</span>
                <br v-if="email.M.envelope.bcc.length > 0">
                <b v-if="email.M.envelope.bcc.length > 0">BCC </b>
                <span v-for="bcc in email.M.envelope.bcc">{{bcc.name ? '"' + bcc.name + '" ' : ''}} {{bcc.address}},&nbsp;</span>
              </div>
            </h2>
          </div>


          <!--!------------------------------------------------------------->
          <!-- ? Subject -->
          <!--!------------------------------------------------------------->
          <div class="row">
            <h3>{{email.M.envelope.subject}}</h3>
          </div>


          <!--!------------------------------------------------------------->
          <!-- ? Quick Actions -->
          <!--!------------------------------------------------------------->
          <div class="options-qa">
            <a v-if="email.M.quick_actions.classification == 'scheduling'">
              <h2 class="action ma2"><img src="assets/icons/email-schedule.svg">Schedule</h2>
            </a>
            <a @click.stop.prevent="openVerify" v-if="email.M.quick_actions.classification == 'verify'">
              <h2 class="action ma2"><img src="assets/icons/link.svg">Verify</h2>
            </a>
            <a v-if="email.M.quick_actions.classification == 'subscribe'">
              <h2 class="action ma2"><img src="assets/icons/link.svg">Subscribe</h2>
            </a>
            <a v-if="email.M.quick_actions.classification == 'unsubscribe'">
              <h2 class="action ma3"><img src="assets/icons/options-unsub.svg">Unsubscribe</h2>
            </a>
            <a v-if="email.M.quick_actions.classification == 'sign_document'">
              <h2 class="action ma2"><img src="assets/icons/sign.svg">Sign</h2>
            </a>
            <a v-if="email.M.quick_actions.classification == 'send_document'">
              <h2 class="action ma2"><img src="assets/icons/attach.svg">Attach Files</h2>
            </a>
            <a @click.stop.prevent="copyOTP" v-if="email.M.quick_actions.classification == 'confirm_code' && email.M.quick_actions.otp">
              <h2 class="action ma2"><img src="assets/icons/clipboard.svg">{{email.M.quick_actions.otp}}</h2>
            </a>
          </div>


          <!--!------------------------------------------------------------->
          <!-- ? Message Interactions -->
          <!--!------------------------------------------------------------->
          <div class="options">
            <div class="container">
              <div class="row">
                <a @click.stop="reply" tooltip="Reply"><img src="assets/icons/options-reply.png" width="20"></a>
                <a @click.stop="replyAll" tooltip="Reply All"><img src="assets/icons/options-replya.png" width="20"></a>
                <a @click.stop="forward" tooltip="Forward"><img src="assets/icons/options-forward.png" width="20"></a>
                <a tooltip="Star" @click.stop.prevent="starMessage" v-if="!(thread.starred)">
                  <img src="assets/icons/options-star.svg" width="20">
                </a>
                <a tooltip="Unstar" @click.stop.prevent="unstarMessage" v-if="thread.starred">
                  <img src="assets/icons/badges-star.svg" width="20">
                </a>
                <a tooltip="Trash" @click.stop.prevent="deleteMessage">
                  <img src="assets/icons/options-trash.svg" class="red" width="20"></a>
              </div>
            </div>
          </div>
        </div>
      </div>


      <!--!------------------------------------------------------------->
      <!-- ? Message Content -->
      <!--!------------------------------------------------------------->
      <div class="email-body">

        <!--!------------------------------------------------------------->
        <!-- ? Scheduler Mini-Tool -->
        <!--!------------------------------------------------------------->
        <div v-if="email.M.quick_actions.classification == 'scheduling'" class="scheduler">
          <p tooltip="Click to change date and time">(new Date(email.M.quick_actions.start)).toNicerDateTime()</p>
          <a>
            <img src="assets/icons/event-white.svg" width="20" />
            <span>Schedule</span>
          </a>
          <div class="scheduler2">
            <!-- TODO: Add calendar view here + design it-->
          </div>
          <!-- TODO: Not sure what to use this text for yet-->
          <span class="sc-info">This will open the composer</span>
        </div>


        <!--!------------------------------------------------------------->
        <!-- ? Message Loader -->
        <!--!------------------------------------------------------------->
        <div v-if="!(email.parsed) || loading" class="load-bottom">
          <p>Loading content</p>
        </div>


        <!--!------------------------------------------------------------->
        <!-- ? Message Body -->
        <!-- FIXME: using iframe right now, will be insecure until I safely inject HTML, see
          https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page -->
        <!--!------------------------------------------------------------->
        <iframe scrolling="no" frameborder="no" class="html-content email-iframe" :id="iframeId" src="">
        </iframe>


        <!--!------------------------------------------------------------->
        <!-- ? Attachments -->
        <!--!------------------------------------------------------------->
        <div class="attachments" v-if="email.parsed.attachments.length > 0">
          <div class="attachment" v-for="attachment in email.parsed.attachments" v-if="!(attachment.related)">
            <!-- TODO: map attachment.contentType (MIMEtype) to icon -->
            <img src="assets/icons/music.svg">
            <div class="name">{{attachment.filename || 'No Filename'}}</div>
            <div class="size">{{attachment.size.toFilesize()}}</div>
          </div>
        </div>

      </div>
    </div>
  </script>

  <script>
    let app = null
  </script>
  <!--! 3rd party libraries -->
  <script src="assets/js/third-party/popper.min.js"></script>
  <script src="assets/js/third-party/jquery.amsify.suggestags.js"></script>
  <script src="assets/js/third-party/bootstrap.min.js"></script>
  <script src="assets/js/third-party/jwt-decode.min.js"></script>
  <script src="assets/js/third-party/jsrsasign.min.js"></script>
  <script src="assets/js/third-party/localforage.min.js"></script>
  <script src="assets/js/third-party/sortable.min.js"></script>
  <script src="assets/js/third-party/vue.min.js"></script>
  <script src="assets/js/third-party/vue-draggable.min.js"></script>
  <script src="assets/js/third-party/chrono.min.js"></script>
  <script src="assets/js/third-party/crypto.js"></script>
  <script src="assets/js/third-party/hotkeys.min.js"></script>
  <script src="assets/js/third-party/twitter-text.min.js"></script>
  <script src="assets/js/third-party/linkify.min.js"></script>
  <script src="assets/js/third-party/anchorme.min.js"></script>

  <!-- TODO: minify all sources into one js file -->
  <!--! common libraries -->
  <script src="assets/js/common/utils.js"></script>
  <script src="assets/js/common/small-storage.js"></script>
  <script src="assets/js/common/big-storage.js"></script>
  <script src="assets/js/common/only-electron.js"></script>
  <script src="assets/js/common/ai-core.js"></script>
  <script src="assets/js/common/mailcleaner.js"></script>
  <!--? Services -->
  <script src="assets/js/services/ipc.js"></script>
  <script src="assets/js/services/aiko.js"></script>
  <script src="assets/js/services/window.js"></script>
  <!--? OAuth -->
  <script src="assets/js/services/oauth/oauth.js"></script>
  <script src="assets/js/services/oauth/goauth.js"></script>
  <script src="assets/js/services/oauth/msoauth.js"></script>
  <!--? Mail-related -->
  <script src="assets/js/services/email/engine.js"></script>
  <script src="assets/js/services/email/mail.js"></script>
  <!--? Composer -->
  <script src="assets/js/services/composer.js"></script>
  <!--? Calendar -->
  <script src="assets/js/services/calendar.js"></script>
  <!--? Modals-->
  <script src="assets/js/services/modals.js"></script>
  <!--? Shortcuts -->
  <script src="assets/js/services/shortcuts.js"></script>
  <!--? Components -->
  <script src="assets/js/components/modals/tutorial.js"></script>
  <script src="assets/js/components/modals/add-mailbox.js"></script>
  <script src="assets/js/components/modals/view-thread.js"></script>
  <script src="assets/js/components/modals/add-board.js"></script>
  <script src="assets/js/components/modals/dev-controls.js"></script>
  <script src="assets/js/components/thread-card.js"></script>
  <script src="assets/js/components/view-email.js"></script>
  <script src="assets/js/components/board.js"></script>
  <!--? Entrypoint -->
  <script src="assets/js/main.js"></script>

</body>

</html>