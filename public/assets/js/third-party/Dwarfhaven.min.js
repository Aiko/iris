var Dwarfhaven;(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);window.post=(e,t,n)=>{return a=void 0,r=void 0,s=function*(){var a;const r=yield fetch("https://mail.helloaiko.com"+e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","x-access-token":n||""}}).catch((e=>console.error("Error in sending request:",e)));if(!r)return null;if(200!=r.status){const e=yield r.json().catch((e=>e));return console.error("Server returned error. Code:",r.status,"& Data:",e),{error:r.status,msg:null!==(a=null==e?void 0:e.error)&&void 0!==a?a:"No or invalid error message received."}}const o=yield r.json().catch((e=>console.error("Error when consuming JSON from server:",e)));if(!o)return null;if(o.error)throw o.error;return o},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function i(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,i)}c((s=s.apply(a,r||[])).next())}));var a,r,o,s},Array.prototype.tail=function(e){return this.slice(-e)},Array.prototype.last=function(){return this.tail(1)[0]},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},window.unescapeHTML=(()=>{const e=document.createElement("div"),t=/&(?:#x[a-f0-9]+|#[0-9]+|[a-z0-9]+);?/gi;return n=>(n=n.replace(t,(t=>{var n;return e.innerHTML=t,null!==(n=e.textContent)&&void 0!==n?n:""})),e.textContent="",n)})();const t=new DOMParser;window.html2Text=e=>{e.length<5e3&&(e=e.replace(/<style[^>]*>([^<]|\n|\r\n)*<\/style>/gi,""));const n=t.parseFromString(e,"text/html");return n.close(),n.body.innerText.trim().replace(/( |\n)+/g," ")},window.html2Element=e=>{const t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild},window.objectId2Date=e=>{const t=e.substring(0,8);return new Date(1e3*parseInt(t,16))},window.channel2Hex=e=>e.toString(16).padStart(2,"0"),window.rgb2Hex=(e,t,n)=>window.channel2Hex(e)+window.channel2Hex(t)+window.channel2Hex(n),window.rgbIsDark=(e,t,n)=>Math.sqrt(.299*Math.pow(e,2)+.587*Math.pow(t,2)+.114*Math.pow(n,2))<150,window.image2Color=(e,t)=>new Promise(((n,a)=>{const r=new window.ColorThief,o=new Image;o.onload=()=>{const e=r.getPalette(o).filter((e=>(null==t||t)==window.rgbIsDark(...e)));if(0==e.length)return n(null);const a=e[0],s=window.rgb2Hex(...a);return n(s)},o.crossOrigin="Anonymous",o.src=e})),window.ext2FontAwesomeIcon=e=>{switch(e){case"gz":case"zip":case"tar":case"7z":case"rar":return"fa-file-archive";case"mp3":case"aac":case"ogg":case"wav":case"raw":return"fa-file-audio";case"js":case"css":case"cpp":case"java":case"class":case"py":case"cs":case"gml":case"bin":case"asm":case"pl":case"hs":case"jsx":case"ts":case"html":case"json":case"sh":case"env":return"fa-file-code";case"xls":case"xlsx":case"csv":case"numbers":return"fa-file-excel";case"jpg":case"jpeg":case"png":case"gif":case"psd":case"ai":case"tiff":case"bmp":case"riff":case"xbmp":case"webp":case"svg":return"fa-file-image";case"mp4":case"avi":case"wmv":case"flv":case"mov":case"webm":case"mpeg":case"mpg":case"mpv":return"fa-file-movie";case"doc":case"docx":return"fa-file-word";case"txt":return"fa-file-text";case"pdf":return"fa-file-pdf";case"ppt":case"pptx":case"odp":return"fa-file-powerpoint";default:return"fa-file"}},window.ext2SVGIcon=e=>{switch(e){case"gz":case"zip":case"tar":case"7z":case"rar":return"file-archive.svg";case"mp3":case"aac":case"ogg":case"wav":case"raw":return"file-audio.svg";case"js":case"css":case"cpp":case"java":case"class":case"py":case"cs":case"gml":case"bin":case"asm":case"pl":case"hs":case"jsx":case"ts":case"html":case"json":case"sh":case"env":return"file-code.svg";case"xls":case"xlsx":case"csv":case"numbers":return"file-sheet.svg";case"jpg":case"jpeg":case"png":case"gif":case"psd":case"ai":case"tiff":case"bmp":case"riff":case"xbmp":case"webp":case"svg":return"file-img.svg";case"mp4":case"avi":case"wmv":case"flv":case"mov":case"webm":case"mpeg":case"mpg":case"mpv":return"file-video.svg";case"doc":case"docx":case"txt":return"file-doc.svg";case"pdf":return"file-pdf.svg";case"ppt":case"pptx":case"odp":return"file-ppt.svg";default:return"file-file.svg"}},Date.prototype.toMonth=function(){return["January","February","March","April","May","June","July","August","September"][this.getMonth()]},Date.prototype.addDays=function(e){const t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},Date.prototype.toDate=function(){return`${this.getMonth()+1}/${this.getDate()}/${this.getFullYear()}`},Date.prototype.toTime=function(){return this.toISOString().substr(11,8)},Date.prototype.toDateTime=function(){return this.toDate()+" "+this.toTime()},Date.prototype.toNicerDateTime=function(){const e=new Date,t=e.addDays(1),n=e.addDays(-1),a=(this.valueOf()-e.valueOf())/864e5;if(Math.abs(a)<2){if(this.getDate()==e.getDate())return"Today, "+this.toLocaleTimeString("en-us",{hour:"numeric",minute:"2-digit"});if(this.getDate()==t.getDate())return"Tomorrow, "+this.toLocaleTimeString("en-us",{hour:"numeric",minute:"2-digit"});if(this.getDate()==n.getDate())return"Yesterday, "+this.toLocaleTimeString("en-us",{hour:"numeric",minute:"2-digit"})}return a<0&&a>-7?"Last "+this.toLocaleDateString("en-us",{weekday:"long",hour:"numeric",minute:"2-digit"}):a>0&&a<7?this.toLocaleDateString("en-us",{weekday:"long",hour:"numeric",minute:"2-digit"}):this.toDateTime()},Date.prototype.toNiceDateTime=function(e=7){const t=new Date,n=(this.valueOf()-t.valueOf())/864e5;return Math.abs(n)<1&&this.getDate()==t.getDate()?this.toLocaleTimeString("en-us",{hour:"numeric",minute:"2-digit"}):Math.abs(n)<e?this.toLocaleDateString("en-us",{weekday:"short",hour:"numeric",minute:"2-digit"}):Math.abs(n)<365?this.toLocaleDateString("en-us",{month:"numeric",day:"numeric"}):this.toDate()};window.downloadAndFillImage=(e,t,n=10)=>{return a=void 0,r=void 0,s=function*(){const a=document.getElementById(t);if(!a&&n>0)return setTimeout((()=>window.downloadAndFillImage(e,t,n-1)),500);yield Vue.nextTick();const r=yield(o=e,new Promise(((e,t)=>{var n;const a=document.createElement("img");a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)return;t.height=a.naturalHeight,t.width=a.naturalWidth,n.drawImage(a,0,0);const r=t.toDataURL("image/png");e(r)},a.src=o,(null===(n=a.complete)||void 0===n||n)&&(a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a.src=o)})));var o;a.src=r,a.removeAttribute("id"),a.removeAttribute("data-formula");const s=document.getElementsByClassName("editor")[0].children[0].innerHTML;window.app.html=s,window.app.editor.setContent(s)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function i(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(n,i)}c((s=s.apply(a,r||[])).next())}));var a,r,o,s},window.copy=e=>{var t;const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n);const a=document.getSelection();if(!a)return;const r=a.rangeCount>0&&a.getRangeAt(0);if(n.select(),document.execCommand("copy"),document.body.removeChild(n),r){const e=null!==(t=document.getSelection())&&void 0!==t?t:a;if(!e)return;e.removeAllRanges(),e.addRange(r)}},window.insertElementAtCursor=e=>{const t=window.getSelection();if(!t)throw Error("Can't find the cursor caret.");const n=t.getRangeAt(0);n.deleteContents(),n.insertNode(e)},Number.prototype.secondsToTimestring=function(){return new Date(1e3*this.valueOf()).toISOString().substr(11,8)},Number.prototype.toFilesize=function(){const e=1e6,t=1e9;return this>t?(this.valueOf()/t).toFixed(2)+" GB":this>e?(this.valueOf()/e).toFixed(2)+" MB":this>1e3?(this.valueOf()/1e3).toFixed(2)+" KB":this+" bytes"};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.random=e=>{let t="";for(;t.length<e;)t+=Math.random().toString(16).substring(2);return t.substring(0,e)},String.prototype.hexEncode=function(){let e,t,n="";for(t=0;t<this.length;t++)e=this.charCodeAt(t).toString(16),n+=e.slice(-2);return n},Array.prototype.joinTo=function(e,t){const n=this.slice(0,e);return this.length>n.length?n.join(t||",")+" + "+(this.length-n.length):n.join(t||",")},String.prototype.getDomain=function(){try{let e;return e=this.startsWith("http://")||this.startsWith("https://")?new window.URL(this.valueOf()):new window.URL("http://"+this),e.host}catch(e){return null}},String.prototype.getAvatar=function({defaultTo:e="assets/img/avatar.png",useBoringAvatars:t=!0,useJdenticon:n=!1,colorPalette:a=["#F6F6F6","#FFFFFF","#2B4192","#486FFF","#486FFF"]}){var r,o,s,i,c;return o=this,s=void 0,c=function*(){const o=this.toString(),s=CryptoJS.MD5(o);if(404!=(yield fetch("https://www.gravatar.com/avatar/"+s.toString()+"?d=404")).status)return"https://www.gravatar.com/avatar/"+s.toString()+"?d=404";const i=()=>{if(t)try{const e=window.BoringAvatars.beam.default(o,a);return window.SVG2PNG(e)}catch(t){return e}else if(n)try{const e=window.jdenticon.toSvg(o,200);return window.SVG2PNG(e)}catch(t){return e}return e};if(null===(r=["gmail.com","office365.com","live.com","hotmail.com","outlook.com","@aol.com","yahoo.com","@me.com","@icloud.com"].filter((e=>o.endsWith(e))))||void 0===r?void 0:r[0])return i();const c="https://logo.clearbit.com/"+o.split("@")[1];return 200!=(yield fetch(c)).status?i():c},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{r(c.next(e))}catch(e){t(e)}}function a(e){try{r(c.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,a)}r((c=c.apply(o,s||[])).next())}))},window.toast=e=>null,Dwarfhaven=e})();